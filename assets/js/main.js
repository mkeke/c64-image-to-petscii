/* include zquery */
/* file:zquery.js */

//=require _*.js

// debug level, see _base.js:initEnv()
let debugLevel = null;

const dom = {};
const state = {};
const conf = {};

zz.loadReady(function(){

    initEnv();

    initDOM();
    initConf();
    initState();

    handleDragDropImage(z(".droppable"), processImage);

    let url = "data:image/jpeg;base64,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";
    let img = document.createElement("IMG");
    img.src = url;

    processImage(img);

    /*
    */
});

function processImage(droppedImage){
    let h=droppedImage.height;
    let w=droppedImage.width;
    log("original: " + w + " x  " + h);

// 527 x 291
// 320 x
/*
    527x = 320
    x = 320/527
*/
    let ctx = z("section.a canvas").getContext("2d");
    ctx.drawImage(droppedImage, 0, 0, w, h, 0, 0, 200, 100);
    // ctx.drawImage(droppedImage, 0, 0, w, h, 0, 0, Math.round(w*320/w), Math.round(h*320/w));
    // ctx.drawImage(droppedImage, 0, 0, w*320/w, h*320/w);

    z("section.b canvas").css("background-image", "url(" + droppedImage.src + ")");
    log("resized: " + (w*320/w) + " x " + (h*320/w));
    // droppedImage.width
    // droppedImage.height
}

function handleDragDropImage(el, callback) {
    el.addEventListener('dragover', function(e) {
        e.preventDefault();
        e.stopPropagation();
        el.addClass('dragover');
    });

    el.addEventListener('dragleave', function(e) {
        e.preventDefault();
        e.stopPropagation();
        el.removeClass('dragover');
    });

    el.addEventListener('drop', function(e) {
        e.preventDefault();
        e.stopPropagation();
        el.removeClass('dragover');

        // handle file upload
        let image;
        if(e.dataTransfer) {
            image = e.dataTransfer.files[0];
        } else if(e.target) {
            image = e.target.files[0];
        }

        let tempImage = document.createElement("IMG");
        tempImage.onload = function(e){
            callback(tempImage);
        }

        let reader = new FileReader();
        reader.onload = function (e) {
            // reader.onload doesn't know the width/height of the image
            // so we need to add it as src to a temp image
            // and trigger onload on that
            tempImage.src = e.target.result;
        }

        // only proceed if image
        if (/^image\/[(jpeg)|(png)|(gif)]/.test(image.type)) {
            reader.readAsDataURL(image);
        }
    });

}

function initDOM(){}
function initState(){}
function initConf(){}
